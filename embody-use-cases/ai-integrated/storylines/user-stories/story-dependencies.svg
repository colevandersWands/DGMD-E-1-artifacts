<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="1000" viewBox="0 0 1400 1000">
  <!-- White background -->
  <rect x="0" y="0" width="1400" height="1000" fill="white"/>

  <!-- Title and Legend -->
  <text x="700" y="30" font-size="24" font-weight="bold" text-anchor="middle">StoryLines User Story Dependencies</text>

  <!-- Legend -->
  <g id="legend" transform="translate(50, 50)">
    <text x="0" y="0" font-size="14" font-weight="bold">Priority Legend:</text>
    <rect x="0" y="10" width="20" height="15" fill="#ff6b6b" stroke="black"/>
    <text x="25" y="22" font-size="12">MUST Have (Rectangle)</text>
    <rect x="0" y="35" width="20" height="15" fill="#ffd93d" stroke="black" transform="rotate(45 10 42.5)"/>
    <text x="25" y="47" font-size="12">SHOULD Have (Diamond)</text>
    <circle cx="10" cy="65" r="10" fill="#6bcf7f" stroke="black"/>
    <text x="25" y="69" font-size="12">COULD Have (Circle)</text>
  </g>

  <!-- Core MUST Have Stories (Foundation Layer) -->
  <g id="must-core">
    <!-- 1. Code Input -->
    <rect x="100" y="150" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="160" y="180" font-size="12" text-anchor="middle" font-weight="bold">1. Code Input</text>
    <text x="160" y="195" font-size="10" text-anchor="middle">(Foundation)</text>

    <!-- 9. Language Detection -->
    <rect x="250" y="150" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="310" y="180" font-size="12" text-anchor="middle" font-weight="bold">9. Language</text>
    <text x="310" y="195" font-size="10" text-anchor="middle">Detection</text>
  </g>

  <!-- Core Visualization MUST Have -->
  <g id="must-viz">
    <!-- 2. Step Execution -->
    <rect x="100" y="250" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="160" y="280" font-size="12" text-anchor="middle" font-weight="bold">2. Step</text>
    <text x="160" y="295" font-size="10" text-anchor="middle">Execution</text>

    <!-- 3. Timeline Control -->
    <rect x="250" y="250" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="310" y="280" font-size="12" text-anchor="middle" font-weight="bold">3. Timeline</text>
    <text x="310" y="295" font-size="10" text-anchor="middle">Control</text>

    <!-- 4. Memory Visualization -->
    <rect x="400" y="250" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="460" y="280" font-size="12" text-anchor="middle" font-weight="bold">4. Memory</text>
    <text x="460" y="295" font-size="10" text-anchor="middle">Visualization</text>
  </g>

  <!-- Metaphor System MUST Have -->
  <g id="must-metaphor">
    <!-- 5. Metaphor Selection -->
    <rect x="600" y="250" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="660" y="280" font-size="12" text-anchor="middle" font-weight="bold">5. Metaphor</text>
    <text x="660" y="295" font-size="10" text-anchor="middle">Selection</text>

    <!-- 6. Metaphor Annotations -->
    <rect x="750" y="250" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="810" y="280" font-size="12" text-anchor="middle" font-weight="bold">6. Metaphor</text>
    <text x="810" y="295" font-size="10" text-anchor="middle">Annotations</text>
  </g>

  <!-- Advanced MUST Have -->
  <g id="must-advanced">
    <!-- 7. Call Stack Display -->
    <rect x="250" y="350" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="310" y="380" font-size="12" text-anchor="middle" font-weight="bold">7. Call Stack</text>
    <text x="310" y="395" font-size="10" text-anchor="middle">Display</text>

    <!-- 8. Async Flow Support -->
    <rect x="400" y="350" width="120" height="60" fill="#ff6b6b" stroke="black" stroke-width="2"/>
    <text x="460" y="380" font-size="12" text-anchor="middle" font-weight="bold">8. Async Flow</text>
    <text x="460" y="395" font-size="10" text-anchor="middle">Support</text>
  </g>

  <!-- SHOULD Have Stories -->
  <g id="should-have">
    <!-- Teaching Features -->
    <!-- 10. Classroom Projection -->
    <g transform="translate(100, 450)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">10. Classroom</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Projection</text>
    </g>

    <!-- 11. Save Visualizations -->
    <g transform="translate(220, 450)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">11. Save Viz</text>
    </g>

    <!-- 12. Speed Control -->
    <g transform="translate(340, 450)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">12. Speed</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Control</text>
    </g>

    <!-- 13. Progressive Examples -->
    <g transform="translate(460, 450)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">13. Progressive</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Examples</text>
    </g>

    <!-- 16. Detail Levels -->
    <g transform="translate(580, 450)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">16. Detail</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Levels</text>
    </g>

    <!-- 17. Toggle Metaphors -->
    <g transform="translate(700, 450)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">17. Toggle</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Metaphors</text>
    </g>

    <!-- Metaphor Themes -->
    <!-- 18. Sports Theme -->
    <g transform="translate(900, 350)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">18. Sports</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Theme</text>
    </g>

    <!-- 19. Fantasy Theme -->
    <g transform="translate(1020, 350)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">19. Fantasy</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Theme</text>
    </g>

    <!-- 20. Cooking Theme -->
    <g transform="translate(1140, 350)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">20. Cooking</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Theme</text>
    </g>

    <!-- Debugger Bridge -->
    <!-- 14. Debugger Transition -->
    <g transform="translate(100, 570)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">14. Debugger</text>
      <text x="70" y="62" font-size="9" text-anchor="middle">Transition</text>
    </g>

    <!-- 15. Bug Identification -->
    <g transform="translate(220, 570)">
      <rect x="25" y="25" width="90" height="50" fill="#ffd93d" stroke="black" stroke-width="2" transform="rotate(45 70 50)"/>
      <text x="70" y="50" font-size="11" text-anchor="middle" font-weight="bold">15. Bug ID</text>
    </g>
  </g>

  <!-- COULD Have Stories (Sample) -->
  <g id="could-have">
    <!-- 21. Predictive Mode -->
    <circle cx="450" cy="620" r="35" fill="#6bcf7f" stroke="black" stroke-width="2"/>
    <text x="450" y="620" font-size="10" text-anchor="middle" font-weight="bold">21. Predictive</text>
    <text x="450" y="632" font-size="9" text-anchor="middle">Mode</text>

    <!-- 25. Event Loop Viz -->
    <circle cx="570" cy="620" r="35" fill="#6bcf7f" stroke="black" stroke-width="2"/>
    <text x="570" y="620" font-size="10" text-anchor="middle" font-weight="bold">25. Event</text>
    <text x="570" y="632" font-size="9" text-anchor="middle">Loop Viz</text>

    <!-- 22. Custom Examples -->
    <circle cx="690" cy="620" r="35" fill="#6bcf7f" stroke="black" stroke-width="2"/>
    <text x="690" y="620" font-size="10" text-anchor="middle" font-weight="bold">22. Custom</text>
    <text x="690" y="632" font-size="9" text-anchor="middle">Examples</text>

    <!-- 23. Lesson Plans -->
    <circle cx="810" cy="620" r="35" fill="#6bcf7f" stroke="black" stroke-width="2"/>
    <text x="810" y="620" font-size="10" text-anchor="middle" font-weight="bold">23. Lesson</text>
    <text x="810" y="632" font-size="9" text-anchor="middle">Plans</text>

    <!-- 28. Peer Learning -->
    <circle cx="930" cy="620" r="35" fill="#6bcf7f" stroke="black" stroke-width="2"/>
    <text x="930" y="620" font-size="10" text-anchor="middle" font-weight="bold">28. Peer</text>
    <text x="930" y="632" font-size="9" text-anchor="middle">Learning</text>

    <!-- 30. Cross-Device -->
    <circle cx="1050" cy="620" r="35" fill="#6bcf7f" stroke="black" stroke-width="2"/>
    <text x="1050" y="620" font-size="10" text-anchor="middle" font-weight="bold">30. Cross</text>
    <text x="1050" y="632" font-size="9" text-anchor="middle">Device</text>

    <!-- Others indicated by ellipsis -->
    <text x="1170" y="620" font-size="14" text-anchor="middle">...</text>
    <text x="1170" y="640" font-size="10" text-anchor="middle">(+7 more)</text>
  </g>

  <!-- Dependencies (Arrows) -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="black"/>
    </marker>
  </defs>

  <!-- From Code Input to core visualization -->
  <line x1="160" y1="210" x2="160" y2="250" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="160" y1="210" x2="310" y2="250" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="160" y1="210" x2="460" y2="250" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Language Detection to Step Execution -->
  <line x1="310" y1="210" x2="210" y2="250" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Step Execution to Timeline -->
  <line x1="220" y1="280" x2="250" y2="280" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From core viz to metaphor system -->
  <line x1="520" y1="280" x2="600" y2="280" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Metaphor Selection to Annotations -->
  <line x1="720" y1="280" x2="750" y2="280" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Step Execution to Call Stack -->
  <line x1="210" y1="310" x2="280" y2="350" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Step Execution to Async Flow -->
  <line x1="210" y1="310" x2="430" y2="350" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Metaphor Selection to Theme stories -->
  <line x1="660" y1="310" x2="945" y2="375" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="660" y1="310" x2="1065" y2="375" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="660" y1="310" x2="1185" y2="375" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Metaphor Annotations to Toggle -->
  <line x1="810" y1="310" x2="770" y2="475" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Timeline to Speed Control -->
  <line x1="340" y1="310" x2="390" y2="475" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From core viz to teaching features -->
  <line x1="280" y1="310" x2="170" y2="475" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="460" y1="310" x2="290" y2="475" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From core viz to debugger features -->
  <line x1="160" y1="310" x2="160" y2="570" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="210" y1="310" x2="265" y2="570" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- From Progressive Examples to Predictive Mode -->
  <line x1="530" y1="525" x2="470" y2="585" stroke="gray" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>

  <!-- From Async Flow to Event Loop Viz -->
  <line x1="490" y1="410" x2="550" y2="585" stroke="gray" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>

  <!-- From Save Viz to Custom Examples -->
  <line x1="310" y1="525" x2="660" y2="590" stroke="gray" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>

  <!-- From Classroom to Lesson Plans -->
  <line x1="190" y1="525" x2="780" y2="590" stroke="gray" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>

  <!-- From Classroom to Peer Learning -->
  <line x1="190" y1="525" x2="900" y2="590" stroke="gray" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>

  <!-- Key Dependencies Note -->
  <text x="700" y="750" font-size="14" font-weight="bold" text-anchor="middle">Key Dependencies:</text>
  <text x="700" y="770" font-size="12" text-anchor="middle">• Code Input (1) enables all visualization features</text>
  <text x="700" y="790" font-size="12" text-anchor="middle">• Step Execution (2) is prerequisite for Timeline (3) and advanced features (7,8)</text>
  <text x="700" y="810" font-size="12" text-anchor="middle">• Metaphor Selection (5) enables Annotations (6) and all theme stories (18-20)</text>
  <text x="700" y="830" font-size="12" text-anchor="middle">• Core MUST features enable all SHOULD and COULD features</text>
  <text x="700" y="850" font-size="12" text-anchor="middle">• Solid arrows = hard dependencies, Dashed = soft dependencies</text>

  <!-- Development Phases -->
  <text x="700" y="900" font-size="14" font-weight="bold" text-anchor="middle">Suggested Development Phases:</text>
  <text x="700" y="920" font-size="12" text-anchor="middle">Phase 1: Stories 1, 9, 2, 3, 4 (Core Foundation)</text>
  <text x="700" y="940" font-size="12" text-anchor="middle">Phase 2: Stories 5, 6, 7, 8 (Metaphors + Advanced)</text>
  <text x="700" y="960" font-size="12" text-anchor="middle">Phase 3: Stories 10-20 (Teaching + Themes)</text>
  <text x="700" y="980" font-size="12" text-anchor="middle">Phase 4: Stories 21-33 (Enhancements)</text>
</svg>