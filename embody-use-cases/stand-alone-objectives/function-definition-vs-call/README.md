# Function Definition vs. Call

An `embody` case-study showing how trace data can be used to address misconceptions around definitions and function calls.

## UX/UI Analysis

The exercise consists of these parts. Learners must correctly:

- arrange the order of execution steps using the drag/drop interface on the right
- add the line number for each step
- label each step as either _definition_ or _call_
- select whether each function is built-in or user-defined

Feedback will be provided on both the sequencing and labeling.

The exercise environment is seeded with an initial program to study. Learners can edit the code and the exercise on the right will update dynamically based on the trace data generated from their new code using `embody`. The exercise will be replaced with a helpful error messages if their code is broken.

The environment is hosted at a stand-alone URL and can load it's program from encoded URL parameters. Sharing URLs are generated dynamically based on the current code in the editor.

### Learner Persona

The learner has a basic understanding of variables, and is familiar with the distinction between a program's static source code and dynamic run.

They have already have a _static_ understanding of function syntax and have learned the vocabulary necessary for this exercise, but are not comfortable applying the concepts in practice.

### Learner Journey

A learner can come to this exercise one of a few ways depending on their learning context:

- **Self Study**: A learner asks AI, traverses YouTube, searches online, and reads forums to understand how functions work. From one of these sources they both learn where the gap is in their understanding and find a link to this learning environment.
- **Guided Tutoring**: A tutor recognizes this misconception in their learner and recommends this exercise environment to overcome the misconception.
- **Structured Course**: A student encounters this exercise embedded in the sequence of materials and exercises provided by their curriculum. It could be a stand-alone study link, embedded in an existing LMS system, or even inlined in an interactive textbook like RuneStone.
- **Automated Assessment Environment**: This exercise is recomened

### Learner Stories

- **As a beginner JS learner I can ...**:
- **As a JS educator I can ...**:

## Technical Analysis

### Seed Program Design Choices

> note: learners can modify the code at will and the exercise will regenerate based on their program

- Using function expressions to avoid hoisting, which would be a distraction from the primary learning objective.
- no arguments to focus only on definitions and calls
- two simple functions with similar behavior to focus on program flow, not complex logic
- included a log call in the bodies so learners can see that program evaluation jumps to the function body
- placed a function call between function definitions so it doesn't appear that function definitions always and must happen before calls in the course of a full program
- more than 1 call of each function so learners can see function reuse
- staggered/alternating function calls so learners can see a function can be called in any order
- there is one function that is never called, demonstrating that calling a function is not required.

### Config + Trace Explanation

To generate this exercise from a program's evaluation we only need low-granularity data focusing on when a function is defined and when it's called. We don't need access to data used in the program, or any information about the environment like variable declarations and reads.

The example data in [trace.json](./trace.json) is adequate for this use case, and can be generated by `embody` when it's called with the code in [program.js](./program.js) and the options in [config.json](./config.json)
